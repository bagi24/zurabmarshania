console.log('Gulp is working!');

function loadPage(url) {
  fetch(url)
    .then(response => {
      if (!response.ok) throw new Error('Page not found');
      return response.text();
    })
    .then(html => {
      document.getElementById('content').innerHTML = html;
    })
    .catch(() => {
      document.getElementById('content').innerHTML = '<h1>404 - გვერდი ვერ მოიძებნა</h1>';
    });
}

function router() {
  const path = window.location.pathname;

  switch (path) {
    case '/':
      loadPage('pages/home.html');

      break;

    case '/about':
      loadPage('pages/about.html');

      break;

    case '/contact':
      loadPage('pages/contact.html');

      break;

    default:
      document.getElementById('content').innerHTML = '<h1>404 - გვერდი ვერ მოიძებნა</h1>';
  }
}

document.querySelectorAll('a[data-link]').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const url = link.getAttribute('href');
    history.pushState(null, null, url);
    router();
  });
});

window.addEventListener('popstate', router);

router();
